<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Callsbacks and Promises</title>
    <script>
        /* 
        1. Callbacks - function refs accepted as argument, asynchronous
        
        2. Promises - used to handle async result of 
        operation (considitonal execution of callbacks)
        */
        var weather;
        const date = new Promise(

            // Attach a callback based on then and catch
            function(resolve, reject) {
                // Usually an API call - with delay
                setTimeout(function () {
                    weather = true;

                    if (weather) {
                        const dateDetails = {
                            name: 'Cubanan Restaurant',
                            location: '55 Street',
                            table: 5
                        };
                        resolve(dateDetails);
                    } else {
                        reject(new Error('Bad weather'));
                    }
                }, 5000);
            }
        )

        // Status will be resolved or rejected, or pending
        date
        .then(function(details) {
            console.log('We are going on a date');
            console.log(details);
            // return new Promise() - next date details
        }) 
        // .then
        .catch(function(error) {
            console.log(error.message);
        })
    </script>
</head>
<body>
    <h1>Hi</h1>
</body>
</html>